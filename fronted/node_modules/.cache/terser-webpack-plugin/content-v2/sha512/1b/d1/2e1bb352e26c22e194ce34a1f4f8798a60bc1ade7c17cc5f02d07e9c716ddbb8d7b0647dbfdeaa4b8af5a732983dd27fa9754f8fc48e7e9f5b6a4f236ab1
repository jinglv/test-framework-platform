{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-10c8aa86\"],{\"707c\":function(e,t,r){\"use strict\";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",{staticClass:\"project\"},[r(\"div\",{staticStyle:{height:\"50px\",\"text-align\":\"left\",width:\"100%\",\"margin-top\":\"20px\"}},[r(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.showDialog()}}},[e._v(\"创建\")])],1),r(\"div\",{staticStyle:{height:\"700px\"}},e._l(e.projectData,(function(t,i){return r(\"div\",{key:i,staticClass:\"text item\"},[r(\"el-col\",{staticClass:\"project-card\",attrs:{span:7}},[r(\"el-card\",{staticStyle:{width:\"350px\",\"margin-top\":\"20px\"}},[r(\"div\",{staticClass:\"clearfix\",attrs:{slot:\"header\"},slot:\"header\"},[r(\"span\",[e._v(e._s(t.name))]),r(\"div\",{staticStyle:{float:\"right\"}},[r(\"el-dropdown\",[r(\"span\",{staticClass:\"el-dropdown-link\"},[r(\"i\",{staticClass:\"el-icon-setting\"})]),r(\"el-dropdown-menu\",{attrs:{slot:\"dropdown\"},slot:\"dropdown\"},[r(\"el-dropdown-item\",[r(\"el-button\",{attrs:{type:\"text\"},on:{click:function(r){return e.cloneProject(t.id)}}},[e._v(\"克隆\")])],1),r(\"el-dropdown-item\",[r(\"el-button\",{attrs:{type:\"text\"},on:{click:function(r){return e.showDetail(t.id)}}},[e._v(\"详情\")])],1),r(\"el-dropdown-item\",[r(\"el-button\",{attrs:{type:\"text\"},on:{click:function(r){return e.showEdit(t.id)}}},[e._v(\"编辑\")])],1),r(\"el-dropdown-item\",[r(\"el-button\",{attrs:{type:\"text\"},on:{click:function(r){return e.deleteProject(t.id)}}},[e._v(\"删除\")])],1)],1)],1)],1)]),e._v(\" \"+e._s(t.address)+\" \"),r(\"img\",{staticClass:\"image\",staticStyle:{height:\"280px\",width:\"300px\"},attrs:{src:t.image}})])],1)],1)})),0),r(\"div\",{staticStyle:{width:\"100%\",\"text-align\":\"right\"}},[r(\"el-pagination\",{attrs:{background:\"\",layout:\"prev, pager, next\",\"page-size\":e.req.size,total:e.total},on:{\"current-change\":e.handleCurrentChange}})],1),e.dialogFlag?r(\"project-dialog\",{attrs:{title:e.dialogTitle,pid:e.currentPorjectId},on:{cancel:e.closeDialog}}):e._e()],1)},a=[],o=r(\"c7eb\"),s=r(\"1da1\"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"el-dialog\",{attrs:{title:e.showTitle,visible:e.dialogVisible,width:\"500px\",\"before-close\":e.closeDialog},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[\"detail\"==e.title?r(\"el-form\",{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{model:e.projectForm,rules:e.rules,\"label-width\":\"100px\"}},[r(\"el-form-item\",{attrs:{label:\"项目名称\",prop:\"name\"}},[e._v(e._s(e.projectForm.name))]),r(\"el-form-item\",{attrs:{label:\"Git项目名称\",prop:\"git_name\"}},[e._v(e._s(e.projectForm.git_name)+\" \")]),r(\"el-form-item\",{attrs:{label:\"Git项目地址\",prop:\"git_address\"}},[e._v(e._s(e.projectForm.git_address)+\" \")]),r(\"el-form-item\",{attrs:{label:\"项目描述\",prop:\"desc\"}},[e._v(e._s(e.projectForm.describe)+\" \")]),r(\"el-form-item\",{attrs:{label:\"图片\",prop:\"image\"}},[r(\"div\",{attrs:{id:\"image\"}},[r(\"el-image\",{staticStyle:{width:\"100px\",height:\"100px\"},attrs:{src:e.imageUrl}})],1)]),r(\"el-form-item\",{staticStyle:{\"text-align\":\"right\"}},[r(\"el-button\",{on:{click:e.closeDialog}},[e._v(\"返回\")])],1)],1):e._e(),\"detail\"!=e.title?r(\"el-form\",{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{model:e.projectForm,rules:e.rules,\"label-width\":\"100px\"}},[r(\"el-form-item\",{attrs:{label:\"项目名称\",prop:\"name\"}},[r(\"el-input\",{model:{value:e.projectForm.name,callback:function(t){e.$set(e.projectForm,\"name\",t)},expression:\"projectForm.name\"}})],1),r(\"el-form-item\",{attrs:{label:\"Git项目名称\",prop:\"git_name\"}},[r(\"el-input\",{model:{value:e.projectForm.git_name,callback:function(t){e.$set(e.projectForm,\"git_name\",t)},expression:\"projectForm.git_name\"}})],1),r(\"el-form-item\",{attrs:{label:\"Git项目地址\",prop:\"git_address\"}},[r(\"el-input\",{model:{value:e.projectForm.git_address,callback:function(t){e.$set(e.projectForm,\"git_address\",t)},expression:\"projectForm.git_address\"}})],1),r(\"el-form-item\",{attrs:{label:\"项目描述\",prop:\"desc\"}},[r(\"el-input\",{attrs:{type:\"textarea\"},model:{value:e.projectForm.describe,callback:function(t){e.$set(e.projectForm,\"describe\",t)},expression:\"projectForm.describe\"}})],1),r(\"el-form-item\",{attrs:{label:\"图片\",prop:\"desc\"}},[r(\"div\",{attrs:{id:\"image\"}},[r(\"el-upload\",{attrs:{action:\"#\",\"before-upload\":e.beforeUpload,\"list-type\":\"picture-card\",\"on-preview\":e.handlePreview,\"on-remove\":e.handleRemove,\"file-list\":e.fileList}},[r(\"i\",{staticClass:\"el-icon-plus\"})]),r(\"el-dialog\",{attrs:{visible:e.imageVisible},on:{\"update:visible\":function(t){e.imageVisible=t}}},[r(\"img\",{attrs:{width:\"100%\",src:e.imageUrl,alt:\"\"}})])],1)]),r(\"el-form-item\",{staticStyle:{\"text-align\":\"right\"}},[r(\"el-button\",{on:{click:e.closeDialog}},[e._v(\"取消\")]),r(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.submitProject(\"ruleForm\")}}},[e._v(\"确定\")])],1)],1):e._e()],1)},c=[],l=(r(\"a9e3\"),r(\"b0c0\"),r(\"b775\"));function u(e){return Object(l[\"a\"])({url:\"/api/projects/list\",method:\"get\",params:e})}function m(e){return Object(l[\"a\"])({url:\"/api/projects/create\",method:\"post\",data:e})}function p(e){return Object(l[\"a\"])({url:\"/api/projects/\"+e,method:\"get\"})}function d(e,t){return Object(l[\"a\"])({url:\"/api/projects/\"+e,method:\"put\",data:t})}function g(e){return Object(l[\"a\"])({url:\"/api/projects/\"+e,method:\"delete\"})}function f(e){return Object(l[\"a\"])({url:\"/api/commons/upload\",method:\"post\",timeout:2e4,data:e})}function h(e){return Object(l[\"a\"])({url:\"/api/projects/clone/\"+e,method:\"get\"})}var b={name:\"PorjectDialog\",components:{},props:{title:{type:String,default:null},pid:{type:Number,default:1}},data:function(){return{dialogVisible:!0,showTitle:\"\",updateURL:\"\",projectForm:{name:\"\",git_name:\"\",git_address:\"\",describe:\"\",image:\"\"},rules:{name:[{required:!0,message:\"请输入项目的名称\",trigger:\"blur\"}]},fileList:[],imageUrl:\"\",imageVisible:!1,disabled:!1}},mounted:function(){\"create\"===this.title?this.showTitle=\"创建项目\":\"detail\"===this.title?(this.showTitle=\"项目详情\",this.initProjectDetail()):\"edit\"===this.title&&(this.showTitle=\"编辑项目\",this.initProjectDetail())},methods:{closeDialog:function(){console.log(\"closeDialog\"),this.$emit(\"cancel\",{})},initProjectDetail:function(){var e=this;return Object(s[\"a\"])(Object(o[\"a\"])().mark((function t(){var r;return Object(o[\"a\"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p(e.pid);case 2:r=t.sent,console.log(\"project info\",r),!0===r.success?(e.projectForm=r.data,e.fileList.push({name:r.data.image,url:\"static/images/\"+r.data.image}),e.imageUrl=\"static/images/\"+r.data.image,e.$message.success(\"项目详情成功！\")):e.$message.error(\"项目详情失败！\");case 5:case\"end\":return t.stop()}}),t)})))()},submitProject:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;\"create\"===t.title?m(t.projectForm).then((function(e){!0===e.success?(t.closeDialog(),t.$message.success(\"项目创建成功！\")):t.$message.error(e.error.message)})):\"edit\"===t.title&&d(t.pid,t.projectForm).then((function(e){!0===e.success?(t.closeDialog(),t.$message.success(\"项目编辑成功！\")):t.$message.error(e.error.message)}))}))},handleRemove:function(e){console.log(\"删除\",e)},handlePreview:function(e,t){console.log(\"上传成功\",e,t),this.imageUrl=e.url,this.imageVisible=!0},beforeUpload:function(e){var t=this;return Object(s[\"a\"])(Object(o[\"a\"])().mark((function r(){var i,a,s;return Object(o[\"a\"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(\"上传文件对象\",e),i=new FormData,i.append(\"file\",e),r.next=5,f(i);case 5:a=r.sent,console.log(\"resp--\\x3e\",a),!0===a.success?(t.projectForm.image=a.data.name,s=\"/static/images/\"+a.data.name,t.fileList.push({name:e.name,url:s}),t.$message.success(\"上传成功！\")):(console.log(\"上传失败\",a),t.$message.error(a.error.message));case 8:case\"end\":return r.stop()}}),r)})))()}}},j=b,v=r(\"2877\"),w=Object(v[\"a\"])(j,n,c,!1,null,null,null),_=w.exports,x={name:\"Porject\",components:{ProjectDialog:_},data:function(){return{dialogFlag:!1,dialogTitle:\"create\",currentPorjectId:0,projectData:[],req:{page:1,size:6},total:10}},mounted:function(){this.initProjectList()},methods:{initProjectList:function(){var e=this;return Object(s[\"a\"])(Object(o[\"a\"])().mark((function t(){var r,i;return Object(o[\"a\"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u(e.req);case 2:if(r=t.sent,!0===r.success){for(i=0;i<r.items.length;i++)r.items[i].image=\"/static/images/\"+r.items[i].image;e.projectData=r.items,e.total=r.total}else e.$message.error(\"查询失败！\");case 4:case\"end\":return t.stop()}}),t)})))()},showDialog:function(){this.dialogTitle=\"create\",this.dialogFlag=!0},closeDialog:function(){this.dialogFlag=!1,this.initProjectList()},handleCurrentChange:function(e){this.req.page=e,this.initProjectList()},showDetail:function(e){this.currentPorjectId=e,this.dialogTitle=\"detail\",this.dialogFlag=!0},showEdit:function(e){this.currentPorjectId=e,this.dialogTitle=\"edit\",this.dialogFlag=!0},cloneProject:function(e){var t=this;return Object(s[\"a\"])(Object(o[\"a\"])().mark((function r(){var i;return Object(o[\"a\"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,h(e);case 2:i=r.sent,console.info(\"克隆项目\"),!0===i.success?t.$message.success(\"项目克隆成功！\"):t.$message.error(\"项目克隆失败！\");case 5:case\"end\":return r.stop()}}),r)})))()},deleteProject:function(e){var t=this;return Object(s[\"a\"])(Object(o[\"a\"])().mark((function r(){return Object(o[\"a\"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,g(e).then((function(e){t.$confirm(\"删除任务, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\",center:!0}).then((function(){!0===e.success?t.initProjectList():t.$message.error(e.error.msg),t.$message({type:\"success\",message:\"删除成功!\"})})).catch((function(){t.$message({type:\"info\",message:\"已取消删除\"})}))}));case 2:case\"end\":return r.stop()}}),r)})))()}}},F=x,y=Object(v[\"a\"])(F,i,a,!1,null,null,null);t[\"default\"]=y.exports},7156:function(e,t,r){var i=r(\"861d\"),a=r(\"d2bb\");e.exports=function(e,t,r){var o,s;return a&&\"function\"==typeof(o=t.constructor)&&o!==r&&i(s=o.prototype)&&s!==r.prototype&&a(e,s),e}},a9e3:function(e,t,r){\"use strict\";var i=r(\"83ab\"),a=r(\"da84\"),o=r(\"94ca\"),s=r(\"6eeb\"),n=r(\"5135\"),c=r(\"c6b6\"),l=r(\"7156\"),u=r(\"c04e\"),m=r(\"d039\"),p=r(\"7c73\"),d=r(\"241c\").f,g=r(\"06cf\").f,f=r(\"9bf2\").f,h=r(\"58a8\").trim,b=\"Number\",j=a[b],v=j.prototype,w=c(p(v))==b,_=function(e){var t,r,i,a,o,s,n,c,l=u(e,!1);if(\"string\"==typeof l&&l.length>2)if(l=h(l),t=l.charCodeAt(0),43===t||45===t){if(r=l.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:i=2,a=49;break;case 79:case 111:i=8,a=55;break;default:return+l}for(o=l.slice(2),s=o.length,n=0;n<s;n++)if(c=o.charCodeAt(n),c<48||c>a)return NaN;return parseInt(o,i)}return+l};if(o(b,!j(\" 0o1\")||!j(\"0b1\")||j(\"+0x1\"))){for(var x,F=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof F&&(w?m((function(){v.valueOf.call(r)})):c(r)!=b)?l(new j(_(t)),r,F):_(t)},y=i?d(j):\"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger\".split(\",\"),O=0;y.length>O;O++)n(j,x=y[O])&&!n(F,x)&&f(F,x,g(j,x));F.prototype=v,v.constructor=F,s(a,b,F)}}}]);","extractedComments":[]}