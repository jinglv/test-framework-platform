{"remainingRequest":"/Users/lvjing/web-project/test-framework-platform/fronted/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lvjing/web-project/test-framework-platform/fronted/src/views/envs/index.vue?vue&type=style&index=0&id=2ef877c3&lang=css&","dependencies":[{"path":"/Users/lvjing/web-project/test-framework-platform/fronted/src/views/envs/index.vue","mtime":1663055390619},{"path":"/Users/lvjing/web-project/test-framework-platform/fronted/node_modules/css-loader/dist/cjs.js","mtime":1660878614753},{"path":"/Users/lvjing/web-project/test-framework-platform/fronted/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1660878615875},{"path":"/Users/lvjing/web-project/test-framework-platform/fronted/node_modules/postcss-loader/src/index.js","mtime":1660878615038},{"path":"/Users/lvjing/web-project/test-framework-platform/fronted/node_modules/cache-loader/dist/cjs.js","mtime":1660878614315},{"path":"/Users/lvjing/web-project/test-framework-platform/fronted/node_modules/vue-loader/lib/index.js","mtime":1660878615769}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmVsLXBvcG92ZXIuaG9tZS1wb3BvdmVyIHsKICB3aWR0aDogNzBweDsKICBtaW4td2lkdGg6IGF1dG87Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkHA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/envs","sourcesContent":["<template>\n  <div class=\"envs\">\n    <div class=\"filter-line\" style=\"text-align: left; margin-top: 20px;\">\n      <el-button cy-data=\"create-project\" type=\"primary\" @click=\"showCreate()\">创建</el-button>\n    </div>\n    <div class=\"envlist\">\n      <el-table :data=\"envData\" border style=\"width: 100%\">\n        <el-table-column fixed prop=\"id\" label=\"ID\" width=\"80\" />\n        <el-table-column prop=\"name\" label=\"名称\" />\n        <el-table-column prop=\"project_name\" label=\"所属项目\" />\n        <el-table-column prop=\"base_url\" label=\"base_url\" />\n        <el-table-column prop=\"browser\" label=\"browser\" />\n        <el-table-column prop=\"env\" label=\"env\" />\n        <el-table-column prop=\"update_time\" label=\"更新时间\" />\n        <el-table-column fixed=\"right\" label=\"操作\" width=\"100\">\n          <template slot-scope=\"scope\">\n            <el-button\n              type=\"text\"\n              size=\"small\"\n              @click=\"showEdit(scope.row)\"\n            >编辑</el-button>\n            <el-button\n              type=\"text\"\n              size=\"small\"\n              @click=\"deleteEnv(scope.row)\"\n            >删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n    <!--分页-->\n    <div style=\"width: 100%; text-align: right; margin-top: 10px;\">\n      <el-pagination\n        background\n        layout=\"prev, pager, next\"\n        :page-size=\"req.size\"\n        :total=\"total\"\n        @current-change=\"handleCurrentChange\"\n      />\n    </div>\n    <envs-dialog v-if=\"showDailog\" :eid=\"envid\" @cancel=\"cancelEnv\" />\n  </div>\n</template>\n\n<script>\nimport { getAllEnvs, deleteEnv } from '@/api/evns'\nimport envsDialog from './components/envsDialog.vue'\n\nexport default ({\n  components: {\n    envsDialog\n  },\n  data() {\n    return {\n      loading: false,\n      envData: [],\n      showDailog: false,\n      envid: 0,\n      req: {\n        page: 1,\n        size: 10\n      },\n      // 分页页数\n      total: 10\n    }\n  },\n  mounted() {\n    this.initEnvList()\n  },\n  methods: {\n    // 初始化获取环境列表\n    async initEnvList() {\n      console.log('获取环境列表')\n      const resp = await getAllEnvs(this.req)\n      if (resp.success === true) {\n        this.envData = resp.items\n        this.total = resp.total\n        // this.$message.success(\"查询成功\");\n      } else {\n        this.$message.error('查询失败!')\n      }\n    },\n    // 显示创建窗口\n    showCreate() {\n      this.showDailog = true\n    },\n    // 显示编辑窗口\n    showEdit(obj) {\n      this.envid = obj.id\n      this.showDailog = true\n    },\n    // 子组件的回调\n    cancelEnv() {\n      this.showDailog = false\n      this.envid = 0\n      this.initEnvList()\n    },\n    // 删除环境信息\n    async deleteEnv(obj) {\n      this.envid = obj.id\n      const resp = await deleteEnv(this.envid)\n      if (resp.success === true) {\n        this.$message.success('删除成功')\n        this.initEnvList()\n        this.envid = 0\n      } else {\n        this.$message.error('删除失败!')\n      }\n    }\n  }\n})\n</script>\n\n<style>\n    .el-popover.home-popover {\n      width: 70px;\n      min-width: auto;\n    }\n</style>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n/* 定义当前组件使用的CSS */\n.filter-line {\n    height: 50px;\n    text-align: left;\n    margin-left: 15px;\n}\n.foot-page {\n    margin-top: 20px;\n    float: right;\n    margin-bottom: 20px;\n}\n.project-card {\n    margin-left: 15px;\n    margin-right: 15px;\n    margin-top: 15px;\n    margin-bottom: 15px\n}\n</style>\n"]}]}