{"remainingRequest":"/Users/lvjing/web-project/test-framework-platform/fronted/node_modules/babel-loader/lib/index.js!/Users/lvjing/web-project/test-framework-platform/fronted/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lvjing/web-project/test-framework-platform/fronted/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lvjing/web-project/test-framework-platform/fronted/src/views/envs/components/envsDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lvjing/web-project/test-framework-platform/fronted/src/views/envs/components/envsDialog.vue","mtime":1663054999981},{"path":"/Users/lvjing/web-project/test-framework-platform/fronted/babel.config.js","mtime":1660724590681},{"path":"/Users/lvjing/web-project/test-framework-platform/fronted/node_modules/cache-loader/dist/cjs.js","mtime":1660878614315},{"path":"/Users/lvjing/web-project/test-framework-platform/fronted/node_modules/babel-loader/lib/index.js","mtime":1660878615043},{"path":"/Users/lvjing/web-project/test-framework-platform/fronted/node_modules/cache-loader/dist/cjs.js","mtime":1660878614315},{"path":"/Users/lvjing/web-project/test-framework-platform/fronted/node_modules/vue-loader/lib/index.js","mtime":1660878615769}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL2x2amluZy93ZWItcHJvamVjdC90ZXN0LWZyYW1ld29yay1wbGF0Zm9ybS9mcm9udGVkL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2x2amluZy93ZWItcHJvamVjdC90ZXN0LWZyYW1ld29yay1wbGF0Zm9ybS9mcm9udGVkL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IHByb2plY3RMaXN0IGFzIF9wcm9qZWN0TGlzdCB9IGZyb20gJ0AvYXBpL3Byb2plY3RzJzsKaW1wb3J0IHsgY3JlYXRlRW52LCB1cGRhdGVFbnYsIGVudkRldGFpbCB9IGZyb20gJ0AvYXBpL2V2bnMnOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIGVpZDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDEKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93U3RhdHVzOiB0cnVlLAogICAgICBzaG93VGl0bGU6ICcnLAogICAgICBmb3JtOiB7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgcHJvamVjdF9pZDogJycsCiAgICAgICAgZW52OiAnJywKICAgICAgICBicm93c2VyOiAnJywKICAgICAgICBiYXNlX3VybDogJycKICAgICAgfSwKICAgICAgaW5SZXNpemU6IHRydWUsCiAgICAgIHByb2plY3RPcHRpb246IFtdCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIGlmICh0aGlzLmVpZCA9PT0gMCkgewogICAgICB0aGlzLnNob3dUaXRsZSA9ICfliJvlu7rnjq/looMnOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5zaG93VGl0bGUgPSAn57yW6L6R546v5aKDJzsKICAgICAgdGhpcy5nZXRFbnYoKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLnByb2plY3RMaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDliJvlu7om57yW6L6R546v5aKDCiAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoZm9ybU5tYW1lKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiRyZWZzW2Zvcm1ObWFtZV0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBpZiAoX3RoaXMuZWlkID09PSAwKSB7CiAgICAgICAgICAgIGNyZWF0ZUVudihfdGhpcy5mb3JtKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICAgICAgaWYgKHJlc3Auc3VjY2VzcyA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yib5bu65oiQ5Yqf77yBJyk7CgogICAgICAgICAgICAgICAgX3RoaXMuY2FuY2VsRW52KCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKCfliJvlu7rlpLHotKXvvIEnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdXBkYXRlRW52KF90aGlzLmVpZCwgX3RoaXMuZm9ybSkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgICAgICAgIGlmIChyZXNwLnN1Y2Nlc3MgPT09IHRydWUpIHsKICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+abtOaWsOaIkOWKn++8gScpOwoKICAgICAgICAgICAgICAgIF90aGlzLmNhbmNlbEVudigpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcign5pu05paw5aSx6LSl77yBJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g6I635Y+W546v5aKD5L+h5oGvCiAgICBnZXRFbnY6IGZ1bmN0aW9uIGdldEVudigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXNwOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGVudkRldGFpbChfdGhpczIuZWlkKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzcCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHJlc3Auc3VjY2VzcyA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICBfdGhpczIuZm9ybSA9IHJlc3AuZGF0YTsKICAgICAgICAgICAgICAgICAgX3RoaXMyLmZvcm0ucHJvamVjdF9pZCA9IHJlc3AuZGF0YS5wcm9qZWN0OwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyLiRtZXNzYWdlLmVycm9yKHJlc3AuZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyDlhbPpl61kaWFsb2cKICAgIGNhbmNlbEVudjogZnVuY3Rpb24gY2FuY2VsRW52KCkgewogICAgICB0aGlzLiRlbWl0KCdjYW5jZWwnLCB7fSk7CiAgICB9LAogICAgLy8g6I635Y+W6aG555uu5YiX6KGoCiAgICBwcm9qZWN0TGlzdDogZnVuY3Rpb24gcHJvamVjdExpc3QoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHJlc3AsIGk7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBfcHJvamVjdExpc3QoX3RoaXMzLnJlcSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlc3AgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCByZXNwLml0ZW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMzLnByb2plY3RPcHRpb24ucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVzcC5pdGVtc1tpXS5pZCwKICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiByZXNwLml0ZW1zW2ldLm5hbWUKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSAvLyB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuafpeivouaIkOWKn++8gSIpCgogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXMzLiRtZXNzYWdlLmVycm9yKCfmn6Xor6LlpLHotKXvvIEnKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AACA;AACA;EACAA;IACAC;MACAC,YADA;MAEAC;IAFA;EADA,CADA;EAOAC,IAPA,kBAOA;IACA;MACAC,gBADA;MAEAC,aAFA;MAGAC;QACAC,QADA;QAEAC,cAFA;QAGAC,OAHA;QAIAC,WAJA;QAKAC;MALA,CAHA;MAUAC,cAVA;MAWAC;IAXA;EAaA,CArBA;EAsBAC,OAtBA,qBAsBA;IACA;MACA;IACA,CAFA,MAEA;MACA;MACA;IACA;EACA,CA7BA;EA8BAC,OA9BA,qBA8BA;IACA;EACA,CAhCA;EAiCAC;IACA;IACAC,QAFA,oBAEAC,SAFA,EAEA;MAAA;;MACA;QACA;UACA;YACAC;cACA;gBACA;;gBACA;cACA,CAHA,MAGA;gBAAA;cAAA;YACA,CALA;UAMA,CAPA,MAOA;YACAC;cACA;gBACA;;gBACA;cACA,CAHA,MAGA;gBACA;cACA;YACA,CAPA;UAQA;QACA,CAlBA,MAkBA;UACA;QACA;MACA,CAtBA;IAuBA,CA1BA;IA2BA;IACAC,MA5BA,oBA4BA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACAC,qBADA;;cAAA;gBACAC,IADA;;gBAEA;kBACA;kBACA;gBACA,CAHA,MAGA;kBACA;gBACA;;cAPA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAQA,CApCA;IAqCA;IACAC,SAtCA,uBAsCA;MACA;IACA,CAxCA;IAyCA;IACAC,WA1CA,yBA0CA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACAA,wBADA;;cAAA;gBACAF,IADA;;gBAEA;kBACA;oBACA;sBACAG,uBADA;sBAEAC;oBAFA;kBAIA,CANA,CAOA;;gBACA,CARA,MAQA;kBACA;gBACA;;cAZA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAaA;EAvDA;AAjCA","names":["props","eid","type","default","data","showStatus","showTitle","form","name","project_id","env","browser","base_url","inResize","projectOption","created","mounted","methods","onSubmit","formNmame","createEnv","updateEnv","getEnv","envDetail","resp","cancelEnv","projectList","value","label"],"sourceRoot":"src/views/envs/components","sources":["envsDialog.vue"],"sourcesContent":["\n<template>\n  <div class=\"enviornment-dialog\">\n    <el-dialog :title=\"showTitle\" :visible.sync=\"showStatus\" width=\"600px\" @close=\"cancelEnv()\">\n      <el-form v-if=\"inResize === true\" ref=\"form\" :model=\"form\" label-width=\"80px\">\n        <el-form-item label=\"环境名称\" prop=\"name\">\n          <el-input v-model=\"form.name\" cy-data=\"enviornment-name\" />\n        </el-form-item>\n        <el-form-item label=\"所属项目\" prop=\"project\">\n          <el-select\n            v-model=\"form.project_id\"\n            placeholder=\"请选择项目...\"\n            style=\"width:480px\"\n          >\n            <el-option\n              v-for=\"(item, index) in projectOption\"\n              :key=\"index\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"环境\" prop=\"env\">\n          <el-input v-model=\"form.env\" cy-data=\"enviornment-env\" />\n        </el-form-item>\n        <el-form-item label=\"浏览器\" prop=\"browser\">\n          <el-input v-model=\"form.browser\" cy-data=\"enviornment-browser\" />\n        </el-form-item>\n        <el-form-item label=\"URL\" prop=\"base_url\">\n          <el-input v-model=\"form.base_url\" cy-data=\"enviornment-url\" />\n        </el-form-item>\n        <el-form-item style=\"margin-top: 22px; margin-bottom: 0px;\">\n          <div class=\"dialog-footer\">\n            <el-button cy-data=\"cancel-enviornment\" @click=\"cancelEnv()\">取消</el-button>\n            <el-button cy-data=\"save-enviornment\" type=\"primary\" @click=\"onSubmit('form')\">保存</el-button>\n          </div>\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { projectList } from '@/api/projects'\nimport { createEnv, updateEnv, envDetail } from '@/api/evns'\nexport default {\n  props: {\n    eid: {\n      type: Number,\n      default: 1\n    }\n  },\n  data() {\n    return {\n      showStatus: true,\n      showTitle: '',\n      form: {\n        name: '',\n        project_id: '',\n        env: '',\n        browser: '',\n        base_url: ''\n      },\n      inResize: true,\n      projectOption: []\n    }\n  },\n  created() {\n    if (this.eid === 0) {\n      this.showTitle = '创建环境'\n    } else {\n      this.showTitle = '编辑环境'\n      this.getEnv()\n    }\n  },\n  mounted() {\n    this.projectList()\n  },\n  methods: {\n    // 创建&编辑环境\n    onSubmit(formNmame) {\n      this.$refs[formNmame].validate(valid => {\n        if (valid) {\n          if (this.eid === 0) {\n            createEnv(this.form).then(resp => {\n              if (resp.success === true) {\n                this.$message.success('创建成功！')\n                this.cancelEnv()\n              } else { this.$message.error('创建失败！') }\n            })\n          } else {\n            updateEnv(this.eid, this.form).then(resp => {\n              if (resp.success === true) {\n                this.$message.success('更新成功！')\n                this.cancelEnv()\n              } else {\n                this.$message.error('更新失败！')\n              }\n            })\n          }\n        } else {\n          return false\n        }\n      })\n    },\n    // 获取环境信息\n    async getEnv() {\n      const resp = await envDetail(this.eid)\n      if (resp.success === true) {\n        this.form = resp.data\n        this.form.project_id = resp.data.project\n      } else {\n        this.$message.error(resp.error.message)\n      }\n    },\n    // 关闭dialog\n    cancelEnv() {\n      this.$emit('cancel', {})\n    },\n    // 获取项目列表\n    async projectList() {\n      const resp = await projectList(this.req)\n      if (resp.success === true) {\n        for (let i = 0; i < resp.items.length; i++) {\n          this.projectOption.push({\n            value: resp.items[i].id,\n            label: resp.items[i].name\n          })\n        }\n        // this.$message.success(\"查询成功！\")\n      } else {\n        this.$message.error('查询失败！')\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.dialog-footer {\n    float: right;\n}\n</style>\n"]}]}